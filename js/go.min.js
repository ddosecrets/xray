function rotate(a){var b=$("img").first(),c=b.parent();angle=(angle+a)%360,angle%180?(c.css("width",(c.parent().width()-10)*b.width()/b.height()),b.css("position","relative"),b.css("width",c.width()-(b.width()>b.height()?10:0)),b.css("top",(b.width()-b.height())/2),b.css("left",(b.height()-b.width())/2),c.css("height",b.width()+10)):(b.css("position",""),b.css("width","100%"),b.css("width","calc(100% - 10px)"),b.css("top",""),c.css("height",""),c.css("width","")),b.rotate(angle)}function resize(){var a=$(window).height();$(".vertical-top, .vertical-bottom").height(a/2),$(".horizontal-left, .horizontal-right").height(a)}function vertical(){$("img").parent().parent().height($(window).height()/2-55),$("table").parent().height($(window).height()/2-55),$(".btn-vertical").prop("disabled",!0),$(".btn-horizontal").prop("disabled",!1),$(".vertical-top").append($(".vertical-top, .horizontal-left").children().detach()),$(".vertical-bottom").append($(".vertical-bottom, .horizontal-right").children().detach()),$(".vertical-top, .vertical-bottom").show(),$(".horizontal-left, .horizontal-right").hide(),rotate(0),"undefined"!=typeof history&&"function"==typeof history.replaceState?history.replaceState({},"",location.pathname):location.hash="#"}function horizontal(){$("img").parent().parent().height($(window).height()-55),$("table").parent().height($(window).height()-55),$(".btn-vertical").prop("disabled",!1),$(".btn-horizontal").prop("disabled",!0),$(".horizontal-left").append($(".vertical-top, .horizontal-left").children().detach()),$(".horizontal-right").append($(".vertical-bottom, .horizontal-right").children().detach()),$(".horizontal-left, .horizontal-right").show(),$(".vertical-top, .vertical-bottom").hide(),rotate(0),"undefined"!=typeof history&&"function"==typeof history.replaceState?history.replaceState({},"","#wide"):location.hash="#wide"}function resize(){"#wide"===location.hash?horizontal():vertical()}function next(){location.reload()}function save(){$("input, label, select").on("mousedown",!1).css("cursor","not-allowed"),$("input:radio:not(:checked)").prop("disabled",!0),$(".btn-add, .btn-remove").prop("disabled",!0),$(".btn-editing").hide(),$(".btn-submitting").show(),$('input[name*="date"]').datepicker("destroy")}function edit(){$(".data-fields").show().find("input").prop("disabled",!1),$("input, label, select").off("mousedown").css("cursor",""),$("input:radio:not(:checked)").prop("disabled",!1),$(".btn-add, .btn-remove").prop("disabled",!1),$(".btn-editing").show(),$(".btn-submitting").hide(),$('input[name*="date"]').attr("id",null).datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"1950:2019"})}function nodataFlag(){document.forms.grids.elements.nodata.value="1",document.forms.grids.submit()}function remove(a){var b=$(a).parents("tr");b.siblings("tr").length?(b.remove(),b.parent().children("tr").each(function(a,b){$(b).find('input[name*="type"]').each(function(b,c){$(c).attr("type["+a+"]")})})):(b.find("input:text").val(""),b.find(":checked").prop("checked",!1),b.find(":selected").prop("selected",!1))}function add(a){var b=$(a).parents("tr"),c=b.find(":checked");$('input[name*="date"]').datepicker("destroy"),b.after(b.clone()),b=b.next(),b.find("input:text").val(""),b.find("input:radio").prop("checked",!1),b.parent().children("tr").each(function(a,b){for(var c=0;c<document.forms.grids.elements.length;c++){var d=document.forms.grids.elements[c].name.match(/\[\d+\]/);document.forms.grids.elements[c].parentNode.parentNode.rowIndex!=a+1&&document.forms.grids.elements[c].parentNode.parentNode.parentNode.rowIndex!=a+1||null==d||(document.forms.grids.elements[c].name=document.forms.grids.elements[c].name.replace(d,"["+a+"]"))}$(b).find('a[id^="copyFromAbove"]').each(function(b,c){a&&($(c).attr("id","copyFromAbove["+a+"]"),$(c).attr("href","javascript:copyAbove("+a+");"),$(c).parent().show())}),$(b).find('input[value^="Director"]').each(function(b,c){a&&$(c).attr("onclick","fillDirector("+a+")")})}),c.prop("checked",!0),$('input[name*="date"]').attr("id",null).datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"1950:2019"})}function fillDirector(a){document.forms.grids.elements["position["+a+"]"].value.length||(document.forms.grids.elements["position["+a+"]"].value="Director")}function copyAbove(a){document.forms.grids.elements["address1["+a+"]"].value=document.forms.grids.elements["address1["+(a-1)+"]"].value,document.forms.grids.elements["address2["+a+"]"].value=document.forms.grids.elements["address2["+(a-1)+"]"].value,document.forms.grids.elements["address3["+a+"]"].value=document.forms.grids.elements["address3["+(a-1)+"]"].value,document.forms.grids.elements["city["+a+"]"].value=document.forms.grids.elements["city["+(a-1)+"]"].value,document.forms.grids.elements["stateprovince["+a+"]"].value=document.forms.grids.elements["stateprovince["+(a-1)+"]"].value,document.forms.grids.elements["postalcode["+a+"]"].value=document.forms.grids.elements["postalcode["+(a-1)+"]"].value,document.forms.grids.elements["country["+a+"]"].value=document.forms.grids.elements["country["+(a-1)+"]"].value}var angle=0;resize(),$(window).on("resize",resize),edit(),$("input:text").each(function(a,b){if($(b).val().trim()&&!document.getElementById("errors").innerHTML.length)return save(),!1});
